(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{35:function(e,n,t){e.exports=t(76)},40:function(e,n,t){},42:function(e,n,t){},73:function(e,n){},76:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),s=t(33),r=t.n(s);t(40),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=t(7),l=t.n(i),o=t(16),u=t(1),h=t(2),p=t(4),m=t(3),d=function(e){Object(p.a)(t,e);var n=Object(m.a)(t);function t(){var e;Object(u.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=n.call.apply(n,[this].concat(c))).click=function(){e.props.onClick(e.props.id)},e}return Object(h.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"channel-item",onClick:this.click},c.a.createElement("div",null,this.props.name),c.a.createElement("span",null,this.props.participants))}}]),t}(c.a.Component),f=function(e){Object(p.a)(t,e);var n=Object(m.a)(t);function t(){var e;Object(u.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=n.call.apply(n,[this].concat(c))).handleClick=function(n){e.props.onSelectChannel(n)},e}return Object(h.a)(t,[{key:"render",value:function(){var e=this,n=c.a.createElement("div",{className:"no-content-message"},"There is no channels to show");return this.props.channels&&this.props.channels.map&&(n=this.props.channels.map((function(n){return c.a.createElement(d,{key:n.id,id:n.id,name:n.name,participants:n.participants,onClick:e.handleClick})}))),c.a.createElement("div",{className:"channel-list"},n)}}]),t}(c.a.Component),v=(t(42),function(e){Object(p.a)(t,e);var n=Object(m.a)(t);function t(){return Object(u.a)(this,t),n.apply(this,arguments)}return Object(h.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"message-item"},c.a.createElement("div",null,c.a.createElement("b",null,this.props.senderName)),c.a.createElement("span",null,this.props.text))}}]),t}(c.a.Component)),g=function(e){Object(p.a)(t,e);var n=Object(m.a)(t);function t(){var e;Object(u.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=n.call.apply(n,[this].concat(c))).state={input_value:""},e.send=function(){e.state.input_value&&""!==e.state.input_value&&(e.props.onSendMessage(e.props.channel.id,e.state.input_value),e.setState({input_value:""}))},e.handleInput=function(n){e.setState({input_value:n.target.value})},e}return Object(h.a)(t,[{key:"render",value:function(){var e=c.a.createElement("div",{className:"no-content-message"},"There is no messages to show");return this.props.channel&&this.props.channel.messages&&(e=this.props.channel.messages.map((function(e){return c.a.createElement(v,{key:e.id,id:e.id,senderName:e.senderName,text:e.text})}))),c.a.createElement("div",{className:"messages-panel"},c.a.createElement("div",{className:"meesages-list"},e),this.props.channel&&c.a.createElement("div",{className:"messages-input"},c.a.createElement("input",{type:"text",onChange:this.handleInput,value:this.state.input_value}),c.a.createElement("button",{onClick:this.send},"Send")))}}]),t}(c.a.Component),k=t(34),b=t.n(k),E="http://127.0.0.1:8080",j=function(e){Object(p.a)(t,e);var n=Object(m.a)(t);function t(){var e;Object(u.a)(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=n.call.apply(n,[this].concat(c))).state={channels:null,socket:null,channel:null},e.configureSocket=function(){var n=b()(E);n.on("connection",(function(){e.state.channel&&e.handleChannelSelect(e.state.channel.id)})),n.on("channel",(function(n){var t=e.state.channels;t.forEach((function(e){e.id===n.id&&(e.participants=n.participants)})),e.setState({channels:t})})),n.on("message",(function(n){var t=e.state.channels;t.forEach((function(e){e.id===n.channel_id&&(e.messages?e.messages.push(n):e.messages=[n])})),e.setState({channels:t})})),e.socket=n},e.loadChannels=Object(o.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:fetch("http://localhost:8080/getChannels").then(function(){var n=Object(o.a)(l.a.mark((function n(t){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.json();case 2:a=n.sent,e.setState({channels:a.channels});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}}),n)}))),e.handleChannelSelect=function(n){var t=e.state.channels.find((function(e){return e.id===n}));e.setState({channel:t}),e.socket.emit("channel-join",n,(function(e){}))},e.handleSendMessage=function(n,t){e.socket.emit("send-message",{channel_id:n,text:t,senderName:e.socket.id,id:Date.now()})},e}return Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadChannels(),this.configureSocket()}},{key:"render",value:function(){return c.a.createElement("div",{className:"chat-app"},c.a.createElement(f,{channels:this.state.channels,onSelectChannel:this.handleChannelSelect}),c.a.createElement(g,{onSendMessage:this.handleSendMessage,channel:this.state.channel}))}}]),t}(c.a.Component);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.29e81850.chunk.js.map